{% extends 'base.html' %}

{% block content %}

<div class="row">
    <div class="span2">
        <h2>Projects</h2>
    </div>
    <div class="pull-right" style="margin-top: 20px;">
        {% if request.user.groups.all.0.name == 'leads' or request.user.groups.all.0.name == 'mentors' %}
        <a href="/newproject" class="btn btn-success btn-small">
            <i class="icon-white icon-file"></i> New Project
        </a>
        {% endif %}
    </div>
</div>

{% if project_list %}
<table class="table table-striped table-condensed table-bordered">
    <thead>
        <tr>
            <th>Project</th>
            <th>Description</th>
            <th>Onshape</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for project in project_list %}
        <tr>
            <td>
                <a href="/projects/{{ project.id }}/">{{ project.name }}</a>
                {% if project.onshape_folder_id %}
                <img src="/static/assets/img/onshapeicon128.png" style="height: 20px; width: 20px; margin-left: 10px;" title="Onshape Managed">
                {% endif %}
            </td>
            <td>{{ project.name }}</td>
            <td>
                {% if project.onshape_folder_id %}
                <a href="https://cad.onshape.com/documents?folderId={{ project.onshape_folder_id }}" target="_blank" class="btn btn-info btn-small">
                    Open Folder
                </a>
                {% endif %}
            </td>
            <td>
                {% if request.user.groups.all.0.name == 'leads' or request.user.groups.all.0.name == 'mentors' %}
                <a href="/projects/{{ project.id }}/delete" class="btn btn-danger btn-small">
                    <i class="icon-white icon-trash"></i> Delete
                </a>
                {% endif %}
            </td>           
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endif %}

{% endblock content %}